<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>html5打击乐</title>
    <link rel="stylesheet" href="./style.css"> <!-- link标签引入css文件 -->
    <link rel="shortcut icon" href="./favicon.ico"> <!-- link标签引入favicon.ico图标 -->
</head>
<body>
    <!-- 音乐键盘区域 -->
    <div class="keys">
        <div class="key" data-key="65">
            <div>A</div>
            <span class="spound">clap</span>
        </div>
        <div class="key" data-key="83">
            <div>S</div>
            <span class="spound">hihat</span>
        </div>
        <div class="key" data-key="68">
            <div>D</div>
            <span class="spound">kick</span>
        </div>
        <div class="key" data-key="70">
            <div>F</div>
            <span class="spound">openhat</span>
        </div>
        <div class="key" data-key="71">
            <div>G</div>
            <span class="spound">boom</span>
        </div>
        <div class="key" data-key="72">
            <div>H</div>
            <span class="spound">ride</span>
        </div>
        <div class="key"data-key="74">
            <div>J</div>
            <span class="spound">snare</span>
        </div>
        <div class="key" data-key="75">
            <div>K</div>
            <span class="spound">tom</span>
        </div>
        <div class="key" data-key="76">
            <div>L</div>
            <span class="spound">think</span>
        </div>
    </div>
    <!-- audio 插入声音内容标签 autoplay 自动播放属性 loop 循环属性 -->
    <audio data-key="65" src="sounds/clap.wav"</audio>
    <audio data-key="83" src="sounds/hihat.wav"</audio>
    <audio data-key="68" src="sounds/kick.wav"</audio>
    <audio data-key="70" src="sounds/openhat.wav"</audio>
    <audio data-key="71" src="sounds/boom.wav"</audio>
    <audio data-key="72" src="sounds/ride.wav"</audio>
    <audio data-key="74" src="sounds/snare.wav"</audio>
    <audio data-key="75" src="sounds/tom.wav"</audio>
    <audio data-key="76" src="sounds/tink.wav"</audio>
    <!-- js部分 -->
    <script>
    const keys = document.querySelectorAll('.key');
    console.log(keys);
    for(let i = 0; i < keys.length; i++) 
    {
        console.log(keys[i])
        keys[i].addEventListener
        ('transitionend' , function(event) {
            event.target.classList.remove('playing')
        })
        // keys[i].addEventListener()
    }
    // 浏览器窗口
    window.addEventListener('keydown',function(event) {
        // 1. 按哪个键 API可以给你的 键值
        // console.log(event);
        const keyCode = event.keyCode;
        console.log(keyCode);
        // 2. 相应的声音
        // 找到音乐元素  css
        // querySelector Audio 
        // id 太多会影响页面性能 
        const audioEle = document.querySelector('audio[data-key="' + keyCode + '"]');/* data-key,属性选择器,比id选择器更加高效 */
        /* audioEle.play(); */
        const keyEle = document.querySelector('.key[data-key="' + keyCode + '"]');
        if (audioEle) {
            keyEle.classList.add('playing')
            audioEle.currentTime = 0;
            audioEle.play();
        }
        // 3. 播放
        // console.log('按键了')
        // const clapAudio =  document.getElementById ('clap')
        // clapAudio.play();
    })
    </script>
</body>
</html>